<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.5. SUOTA &mdash; UM-B-083</title><link rel="stylesheet" href="../../../_static/css/lpc_cs_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" /><link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.6. QSPI Partition Table" href="../qspi_part_table/qspi_part_table.html" />
    <link rel="prev" title="3.4. Flash Data" href="../../common_oper/flash_data/flash_data.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html"><img src="../../../_static/V-Reverse.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../inst_guide/inst_guide.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html">2. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">3. Programmer Operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../common_oper/flash_code/flash_code.html">3.1. Flash Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../common_oper/otp/otp.html">3.2. OTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../common_oper/ram/ram.html">3.3. RAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../common_oper/flash_data/flash_data.html">3.4. Flash Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.5. SUOTA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#suota-image-and-agent-preparation">3.5.1. SUOTA Image and Agent Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search-select-for-remote-targets">3.5.2. Search &amp; Select for Remote Targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-devices">3.5.3. Update Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#releasing-communication">3.5.4. Releasing Communication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../qspi_part_table/qspi_part_table.html">3.6. QSPI Partition Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eeprom/eeprom.html">3.7. EEPROM Programmer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proprietary_header_prog/proprietary_header_prog.html">3.8. Proprietary Header Programmer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ota_services/ota_services.html">3.9. OTA Services (over the air services)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../estimator/index.html">4. Estimator Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manager_oper/index.html">5. Manager Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../monitor_oper/index.html">6. Monitor Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configurator/index.html">7. Configurator Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/command_line_if.html">8. CLI implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_help/index.html">9. Application Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/troubleshooting.html">10. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/index.html">11. Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../disclaimers_contact.html">12. Disclaimers &amp; Contact info</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">UM-B-083</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">3. Programmer Operations</a> &raquo;</li>
      <li>3.5. SUOTA</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="suota">
<span id="suota-tool"></span><h1>3.5. SUOTA<a class="headerlink" href="#suota" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The SUOTA (Software Update Over The Air) tool applies to DA1469x, DA1470x and DA1459x chip family. It requires a DA1469x-family chip (dongle or DK)
to be connected to the host system, in order to properly function.</p>
</div>
<p>SUOTA Update Manager is a tool bundled with SmartSnippents Toolbox that enables users to remotely update SUOTA-ready devices with a
selected F/W Image, by additionally using a separate DA1469x device to act as the proxy Agent.</p>
<p>Remote eligible devices act as servers by exposing SUOTA related services, while it is not required by any means to be
physically connected with the host system or the tool. Usually is acceptable if they can operate in vicinity to the proxy area.</p>
<p>DA1469x Agent device needs to get connected to the host system/tool either through JTAG or UART usb connection,
to properly receive control commands and the F/W image that will have to transmit later to the selected/eligible remote targets.</p>
<p>Proxy Agent is acting as the client to the remote SUOTA related services over Bluetooth,
while it can scan and get serially connected to each and every one of them to request information or to
transfer a firmware update. On successfully transmitted updates the remote target gets restarted
automatically in order to apply and execute the newly received firmware.</p>
<p>Steps to update one or more remote targets at once:</p>
<ol class="arabic simple">
<li>Connect a DA1469x device to your host system.</li>
<li>Start Toolbox and select to work with a DA1469x profile.</li>
<li>Start the SUOTA tool.</li>
<li>Select a SUOTA image to be transmitted to the remote/targeted device.</li>
<li>Press “Prepare Device” button to properly initialize the connected DA1469x device.</li>
<li>Select a UART port to establish connection with the connected DA1469x device (in case that more than one UART devices found connected to the host system).</li>
<li>Select the remote targets from the “found devices” list and transfer them to the “selected targets” list to the right.</li>
<li>Complete the procedure by pressing the “Update” button and wait for the progress report.</li>
</ol>
<div class="figure align-center" id="id1">
<span id="suota69x"></span><img alt="../../../_images/SUOTA69x.png" src="../../../_images/SUOTA69x.png" />
<p class="caption"><span class="caption-number">Figure 44 </span><span class="caption-text">Preview of SUOTA tool.</span></p>
</div>
<div class="section" id="suota-image-and-agent-preparation">
<h2>3.5.1. SUOTA Image and Agent Preparation<a class="headerlink" href="#suota-image-and-agent-preparation" title="Permalink to this headline">¶</a></h2>
<p>To properly configure the connected to your host system DA1469x device (Dongle or Development Kit), upon toolbox’s startup users will have to select the appropriate device profile and type of interface that they would like to get connected with.</p>
<p>You can choose one of the two available setup options:</p>
<ol class="arabic simple">
<li>Connect a DA1469x chip via JTAG interface.</li>
<li>Connect a DA1469x chip via UART interface.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This interface selection is used to initially load/configure the DA1469x associated chip with required for such a case firmware, that will eventually enable it to act as a “proxy” agent device.</p>
</div>
<p>Once the SUOTA tool gets successfully started, next step is to select the SUOTA firmware image that SUOTA tool will be using as the firmware update that will be transmitted to all selected remote devices afterwards. To complete the preparation, you will have to click on the “Browse” button, select an appropriate SUOTA image file and then click on the “Prepare Device” button.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case that a UART interface was selected in the previous step, it will be additionally required a manual hardware reset from the Reset pin found on the DA1469x Dongle or DK board.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure that the selected image file is properly compiled with “SUOTA support” enabled, and that you have selected the correct platform and chip for the targeted devices that you would like to transfer the F/W update.</p>
</div>
<p>Further to the Agent preparation and once the “Prepare Device” button get pressed, the tool will process in the background the following actions:</p>
<ol class="arabic simple">
<li>Connect to a DA1469x chip via one of the provided interfaces (UART, JTAG)</li>
<li>Burn partition table on address 0x3FF000</li>
<li>Verify that partition table is properly defined</li>
<li>Burn provided SUOTA image on NVMS_BIN_PART partition</li>
<li>Burn all necessary header configurations</li>
<li>Burn a “ble_suota_client” firmware on NVMS_FIRMWARE_PART partition, to make it behave as the “proxy” agent</li>
</ol>
<p>After that and once all background actions get successfully completed, SUOTA tool will connect to the DA1469x chip in order to establish the control channel communication. The communication over the Control channel is getting established using the UART/COM ports that “ble_suota_client” firmware is exposing.
In our case if more that one COM devices found connected to the host system, the tool will kindly ask for users to select which one to be used.</p>
<p>Finally, after communication over the control channel gets successfully established, users will have to press for one last time the Reset pin found on the DA1469x Dongle or DK boards, in order to properly initialize the “proxy” agent.</p>
<p>Upon a proper “proxy” agent startup, you will be able to review through GUI, some information regarding the loaded SUOTA FW image and “Proxy” agent details:</p>
<ol class="arabic simple">
<li>Proxy - Dongle F/W</li>
<li>SUOTA - F/W Image Size</li>
<li>SUOTA - Code Size</li>
<li>SUOTA - Version</li>
<li>SUOTA - Timestamp</li>
<li>SUOTA - CRC check</li>
</ol>
</div>
<div class="section" id="search-select-for-remote-targets">
<h2>3.5.2. Search &amp; Select for Remote Targets<a class="headerlink" href="#search-select-for-remote-targets" title="Permalink to this headline">¶</a></h2>
<p>After a successful Agent preparation, SUOTA tool will automatically scan for detected Remote Devices and the ones found are going to be listed under the “Found Devices” list. Users can select to transfer devices from that list and move them to the “Selected Targets to be Updated” on the right and vice versa. The selection and transferring from “Found Devices” to the “Selected Targets to be Updated” and back, can happen by selecting one write at a time and use the adequate arrows to move them accordingly. Additionally, you can select multiple writes by using the “CTRL-A” key combination and then use the arrow keys to complete the transfer.</p>
<p>In case that the “Support for SUOTA” option is selected, then only SUOTA eligible remote targets will be listed under the “Found Devices” list, while in different case all detected devices will be listed.</p>
<p>Users can always select to clear any of the detected devices by selecting the “Clear list” button. This will affect only the list with the found devices while if needed users will have to select and remove any entries from the “selected Targets to be updated” manually. Background scanning operation will not get interrupted from the “Clear List” actions.</p>
<p>Further to that functionality, users can always add manually any custom/hidden address that they would like to use as a remote MAC address. To do so you will have to click on the “Add Manually” button and type a valid BLE MAC address and an optional name that you would like to use. In case that we select a device that is already listed, then the new alias name (if provided) will replace the old one.</p>
<div class="figure align-center" id="id2">
<span id="suotaaddmac"></span><img alt="../../../_images/addMAC.png" src="../../../_images/addMAC.png" />
<p class="caption"><span class="caption-number">Figure 45 </span><span class="caption-text">Add manually a new or hidden device.</span></p>
</div>
<p>Users can request extra information on “Selected Targets to be updated”, by executing a double-click on any such device found listed. The revealed dialog will display any information that can be retrieved from the connected remote target, but in order to get this operation properly completed, remote targets should be enabled with a SUOTA eligible firmware.</p>
<p>Once this operations gets started, the SUOTA tool will go through the following steps:</p>
<ol class="arabic simple">
<li>Try to connect to the selected remote target.</li>
<li>Upon successful connection establishment, it will request for extra information.</li>
<li>Collect information and display them appropriately.</li>
</ol>
<p>In different case it will retry for two more times and if still not with success, it will state that the remote target possibly do not support SUOTA operations.</p>
<div class="figure align-center" id="id3">
<span id="suotainfosuta"></span><img alt="../../../_images/infoSUTA.png" src="../../../_images/infoSUTA.png" />
<p class="caption"><span class="caption-number">Figure 46 </span><span class="caption-text">Request and review information on connected remote targets</span></p>
</div>
</div>
<div class="section" id="update-devices">
<h2>3.5.3. Update Devices<a class="headerlink" href="#update-devices" title="Permalink to this headline">¶</a></h2>
<p>Users can update at once all selected devices listed under the “Selected Targets to be Updated” list, by just pressing the “Update” button. The Update process will take place serially on one device after another(top to bottom), while any abort request will get queued and served only after some safety-related tasks got properly completed.</p>
<p>Updating Steps:</p>
<ol class="arabic simple">
<li>Connect to target with known MAC address</li>
<li>Transmit firmware Update</li>
<li>Restart Target</li>
<li>Connect to the next target</li>
<li>Follow steps in the loop till all targets get processed</li>
</ol>
<div class="figure align-center" id="id4">
<span id="updatingsuota"></span><img alt="../../../_images/updatingSUOTA.png" src="../../../_images/updatingSUOTA.png" />
<p class="caption"><span class="caption-number">Figure 47 </span><span class="caption-text">Updating selected remote targets</span></p>
</div>
<p>If any of the above steps fail, update process will proceed with the next device found in the list while it will mark the device’s update status accordingly. Once update operation gets properly completed, the status report will remain open while a new scan operation will start automatically in the background.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the delivered firmware prescribes a fixed virtual mac to each and every one of the remote targets, then after a successful deployment to more than one remote targets, only one of them will remain visible (since only one device can get assigned per single mac address).</p>
</div>
</div>
<div class="section" id="releasing-communication">
<h2>3.5.4. Releasing Communication<a class="headerlink" href="#releasing-communication" title="Permalink to this headline">¶</a></h2>
<p>Once the Agent preparation phase gets completed, SUOTA Tool will try to allocate required resources and it will try to connect with the associated DA1469x device through any available communication interface. When you are done using this tool and before deciding to exit or switch to a different tool, you are kindly requested to release any allocated resources by pressing the “Release Communication” button.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../common_oper/flash_data/flash_data.html" class="btn btn-neutral float-left" title="3.4. Flash Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../qspi_part_table/qspi_part_table.html" class="btn btn-neutral float-right" title="3.6. QSPI Partition Table" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Renesas Electronics Corporation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZXND4SB7CL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-ZXND4SB7CL', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>